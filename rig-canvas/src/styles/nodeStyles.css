/* Node resizer customizations */
.node-resizer-line {
  border-width: 2px !important;
  transition: all 0.15s cubic-bezier(0.17, 0.67, 0.83, 0.67) !important;
  z-index: 1000 !important;
  opacity: 0.8 !important;
}

.node-resizer-handle {
  width: 12px !important;
  height: 12px !important;
  transition: transform 0.1s, background-color 0.1s !important;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.3) !important;
  z-index: 1001 !important; /* Make sure handles are above lines */
  pointer-events: all !important; /* Ensure handles capture mouse events */
}

/* Improve the XYFlow resizer visibility */
.xy-flow__resize-control {
  z-index: 1000 !important;
  pointer-events: all !important;
}

.node-resizer-handle:hover {
  transform: scale(1.2) !important;
  background-color: #4f46e5 !important; /* A brighter accent color when hovering */
}

/* Custom cursor styles for each resize direction */
.node-resizer-handle[data-position="top"] {
  cursor: n-resize !important;
}
.node-resizer-handle[data-position="top-right"] {
  cursor: ne-resize !important;
}
.node-resizer-handle[data-position="right"] {
  cursor: e-resize !important;
}
.node-resizer-handle[data-position="bottom-right"] {
  cursor: se-resize !important;
}
.node-resizer-handle[data-position="bottom"] {
  cursor: s-resize !important;
}
.node-resizer-handle[data-position="bottom-left"] {
  cursor: sw-resize !important;
}
.node-resizer-handle[data-position="left"] {
  cursor: w-resize !important;
}
.node-resizer-handle[data-position="top-left"] {
  cursor: nw-resize !important;
}

/* Improved content styling */
.note-content {
  overflow: auto;
  word-wrap: break-word;
  will-change: width, height, transform;
  backface-visibility: hidden;
  transform: translateZ(0);
  /* No transition during resizing to prevent lag */
  box-sizing: border-box !important; 
  /* Ensure content doesn't overflow and interfere with resizer */
  position: relative;
  /* Create a new stacking context to avoid z-index conflicts */
  isolation: isolate;
}

/* Fix the ReactFlow node default behavior */
.react-flow__node {
  box-sizing: border-box !important;
  max-width: none !important; /* Remove any max-width restrictions */
  position: relative;
}

/* Improve resizer visibility and interaction */
.react-flow__resize-control {
  z-index: 10;
  border-radius: 50%;
}

.react-flow__resize-control.handle {
  width: 8px !important;
  height: 8px !important;
  background-color: #3367d9 !important;
  border: 2px solid white !important;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
}

/* Ensure resizing handles are always visible when node is selected */
.react-flow__node.selected .react-flow__resize-control {
  opacity: 1;
}

/* Make resize controls more visible on hover */
.react-flow__resize-control:hover {
  transform: scale(1.2);
  cursor: pointer;
}

/* Additional sizing properties */
.react-flow__node {
  max-height: none !important; /* Remove any max-height restrictions */
}

/* Ensure that ReactFlow data-driven attributes work correctly */
[data-resizing="true"] {
  transition: none !important; /* Disable transitions during active resize */
}

/* Smooth markdown rendering */
.prose {
  transition: all 0.15s cubic-bezier(0.17, 0.67, 0.83, 0.67);
  will-change: transform;
}

/* Make toolbar move smoothly with resize */
.note-toolbar {
  transition: all 0.15s cubic-bezier(0.17, 0.67, 0.83, 0.67);
}
